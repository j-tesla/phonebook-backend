(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t(15),a=t.n(o),u=t(6),i=t(3),s=function(e){return Object(r.jsxs)("form",{onSubmit:e.addPerson,children:[Object(r.jsxs)("div",{children:[" name: ",Object(r.jsx)("input",{value:e.newName,onChange:e.handleChange(e.setNewName)})]}),Object(r.jsxs)("div",{children:[" number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.handleChange(e.setNewNumber)})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:function(){t(n)},children:"delete"})})},l=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)(r.Fragment,{children:["".concat(n.name," ").concat(n.number)," ",Object(r.jsx)(d,{person:n,deletePerson:t}),Object(r.jsx)("br",{})]})},b=function(e){var n=e.persons,t=e.filter,c=e.deletePerson;return Object(r.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(r.jsx)(l,{person:e,deletePerson:c},e.name)}))})},j=function(e){var n=e.handleChange,t=e.filter,c=e.setFilter;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:t,onChange:n(c)})]})},f=function(e){var n=e.message;if(null==n)return null;var t={color:n.color,background:"lightgrey",borderStyle:"solid",borderRadius:5,borderColor:"green",padding:10,marginBottom:10};return Object(r.jsx)("h2",{style:t,children:n.message})},h=t(4),m=t.n(h),p="api/persons",O={getAll:function(){return m.a.get(p)},create:function(e){return m.a.post(p,e)},update:function(e,n){return m.a.put("".concat(p,"/").concat(e),n)},delete:function(e){return m.a.delete("".concat(p,"/").concat(e))}},g=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),d=Object(i.a)(a,2),l=d[0],h=d[1],m=Object(c.useState)(""),p=Object(i.a)(m,2),g=p[0],v=p[1],x=Object(c.useState)(""),w=Object(i.a)(x,2),N=w[0],C=w[1],P=Object(c.useState)(null),k=Object(i.a)(P,2),y=k[0],S=k[1];Object(c.useEffect)((function(){O.getAll().then((function(e){return e.data})).then((function(e){o(e)})).catch((function(e){console.log("".concat(e,": could not get data from the sever"))}))}),[]);var A=function(e,n){S({message:e,color:n}),setTimeout((function(){S(null)}),5e3)},F=function(e){return function(n){e(n.target.value)}};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:y}),Object(r.jsx)(j,{handleChange:F,filter:N,setFilter:C}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(s,{addPerson:function(e){e.preventDefault(),t.map((function(e){return e.name})).includes(l)?function(){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var e=t.find((function(e){return e.name===l}));e=Object(u.a)(Object(u.a)({},e),{},{number:g}),O.update(e.id,e).then((function(e){return e.data})).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),A("Updated ".concat(e.name),"green")})).catch((function(n){404===n.response.status&&(A("Information about ".concat(e.name," has been removed from server"),"red"),o(t.filter((function(n){return n.id!==e.id})))),console.log(n)}))}}():O.create({name:l,number:g}).then((function(e){return e.data})).then((function(e){o(t.concat(e)),A("Added ".concat(e.name),"green")})).catch((function(e){window.alert("".concat(e,": could not add phone number to database")),console.log("".concat(e,": could not add phone number to database"))})),h(""),v("")},handleChange:F,newName:l,setNewName:h,newNumber:g,setNewNumber:v}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{persons:t,filter:N.trim(),deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&O.delete(e.id).then((function(){o(t.filter((function(n){return n.id!==e.id}))),A("Deleted ".concat(e.name),"green")})).catch((function(n){404===n.response.status&&(A("Information about ".concat(e.name," has already been removed from server"),"red"),o(t.filter((function(n){return n.id!==e.id})))),console.log(n)}))}})]})};a.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f1c5712f.chunk.js.map